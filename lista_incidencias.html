<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Estado de Reportes - Cusco Reporta</title>
  <link rel="stylesheet" href="../css/styles.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <style>
    /* ====== ESTILOS ESPECÍFICOS PARA ESTADO DE REPORTES ====== */
    .reports-container {
      background-color: white;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      padding: 0;
      margin-top: 20px;
    }

    .reports-header {
      padding: 25px;
      border-bottom: 1px solid #e0e0e0;
      background-color: #f8f9fa;
    }

    .reports-header h2 {
      color: var(--primary-color);
      margin-bottom: 20px;
      font-size: 1.5rem;
    }

    .date-filters {
      display: flex;
      gap: 20px;
      margin-bottom: 15px;
      flex-wrap: wrap;
    }

    .filter-group {
      display: flex;
      flex-direction: column;
      min-width: 150px;
    }

    .filter-group label {
      font-size: 0.9rem;
      margin-bottom: 5px;
      color: #555;
      font-weight: 500;
    }

    .filter-group input, .filter-group select {
      padding: 10px 12px;
      border: 1px solid #ddd;
      border-radius: 4px;
      font-size: 0.9rem;
      transition: border-color 0.3s ease;
    }

    .filter-group input:focus, .filter-group select:focus {
      outline: none;
      border-color: var(--primary-color);
    }

    .status-filter {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .status-filter label {
      margin-bottom: 0;
    }

    .reports-table {
      padding: 0;
    }

    .reports-table h3 {
      padding: 20px 25px 15px;
      color: var(--primary-color);
      margin: 0;
      font-size: 1.2rem;
      border-bottom: 1px solid #e0e0e0;
      background-color: #f8f9fa;
    }

    table {
      width: 100%;
      border-collapse: collapse;
    }

    th, td {
      padding: 15px 25px;
      text-align: left;
      border-bottom: 1px solid #e0e0e0;
    }

    th {
      background-color: #f8f9fa;
      font-weight: 600;
      color: #555;
      font-size: 0.9rem;
    }

    tr:hover {
      background-color: #f8f9fa;
    }

    .status-badge {
      padding: 6px 12px;
      border-radius: 20px;
      font-size: 0.8rem;
      font-weight: 500;
      display: inline-block;
    }

    .status-reporte {
      background-color: #fff3cd;
      color: #856404;
    }

    .status-proceso {
      background-color: #cce7ff;
      color: #004085;
    }

    .status-solucionado {
      background-color: #d4edda;
      color: #155724;
    }

    /* ====== RESPONSIVE ====== */
    @media (max-width: 768px) {
      .date-filters {
        flex-direction: column;
        gap: 10px;
      }
      
      .filter-group {
        min-width: 100%;
      }
      
      table {
        font-size: 0.8rem;
      }
      
      th, td {
        padding: 10px 15px;
      }
    }
  </style>
</head>
<body>
  <!-- ====== NAVBAR SUPERIOR ====== -->
  <header class="topbar">
    <div class="topbar__logo">
      <img src="../assents/images/CuscoReporta.png" alt="Cusco Reporta Logo">
    </div>
    <nav class="topbar__menu">
      <a href="index.html">Inicio</a>
      <a href="sobre_nosotros.html">Sobre nosotros</a>
      <a href="ayuda.html">Ayuda</a>
    </nav>
  </header>

  <!-- ====== CONTENEDOR PRINCIPAL ====== -->
  <div class="container">
    <!-- ====== SIDEBAR IZQUIERDO ====== -->
    <aside class="sidebar" style="display: flex; flex-direction: column; justify-content: flex-start;">
      <div class="sidebar__user" style="margin-bottom: 10px;">
        <div class="sidebar__avatar">
          <i class="fa-solid fa-user"></i>
        </div>
        <div class="sidebar__info">
          <h3>Jose Pérez</h3>
          <p>Ciudadano</p>
        </div>
      </div>

      <!-- Menú del usuario -->
      <ul class="sidebar__menu" style="margin-top: 0; padding-top: 0; list-style: none;">
        <li style="display: flex; align-items: flex-start;">
          <a href="perfil_usuario.html">
            <i class="fa-solid fa-id-card" style="width: 20px;"></i>
            <span style="margin-left:8px;">Ver perfil</span>
          </a>
        </li>
        <li style="display: flex; align-items: flex-start;">
          <a href="ReportarIncidencia.html">
            <i class="fa-solid fa-pen-to-square" style="width: 20px;"></i>
            <span style="margin-left:8px;">Reportar</span>
          </a>
        </li>
        <li style="display: flex; align-items: flex-start;">
          <a href="registrar_Denuncia.html">
            <i class="fa-solid fa-triangle-exclamation" style="width: 20px;"></i>
            <span style="margin-left:8px;">Denunciar</span>
          </a>
        </li>
        <li style="display: flex; align-items: flex-start;">
          <a href="lista_incidencias.html"class="active">
            <i class="fa-solid fa-list-check" style="width: 20px;"></i>
            <span style="margin-left:8px;">Estado de reportes</span>
          </a>
        </li>
        <li style="display: flex; align-items: flex-start;">
          <a href="MapaIncidiencias(Ciudadano).html">
            <i class="fa-solid fa-map-location-dot" style="width: 20px;"></i>
            <span style="margin-left:8px;">Mapa de incidencias</span>
          </a>
        </li>
        <li style="display: flex; align-items: flex-start;">
          <a href="notificaciones.html">
            <i class="fa-solid fa-bell" style="width: 20px;"></i>
            <span style="margin-left:8px;">Notificaciones</span>
          </a>
        </li>
      </ul>


      <button class="logout-btn" id="logoutBtn" style="margin-top: auto;">
        <i class="fa-solid fa-right-from-bracket"></i> Cerrar sesión
      </button>
    </aside>

    <!-- ====== CONTENIDO PRINCIPAL ====== -->
    <main class="main-content">
      <div>
        <h1>Estado de Reportes</h1>
        <p style="color:#555; margin-top:10px;">
          Consulta el estado de tus reportes e incidencias registradas en el sistema.
        </p>
      </div>
      
      <!-- Contenedor de Reportes -->
      <div class="reports-container">
        <!-- Panel de filtros -->
        <div class="reports-header">
          <h2>LISTADO DE INCIDENCIAS</h2>
          <div class="date-filters">
            <div class="filter-group">
              <label for="fecha-inicio">Desde:</label>
              <input type="date" id="fecha-inicio" value="2024-04-01">
            </div>
            <div class="filter-group">
              <label for="fecha-fin">Hasta:</label>
              <input type="date" id="fecha-fin" value="2024-04-30">
            </div>
            <div class="filter-group status-filter">
              <label for="estado">ESTADO:</label>
              <select id="estado">
                <option value="todos">Todos</option>
                <option value="reporte">Reporte</option>
                <option value="proceso">En Proceso</option>
                <option value="solucionado">Solucionado</option>
              </select>
            </div>
          </div>
        </div>
        
        <!-- Tabla de reportes -->
        <div class="reports-table">
          <h3>REPORTES RECIBIDOS</h3>
          <table>
            <thead>
              <tr>
                <th>ID</th>
                <th>Fecha</th>
                <th>Dirección</th>
                <th>Estado</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>1052</td>
                <td>20/04/2024</td>
                <td>Av. El Sol 500</td>
                <td><span class="status-badge status-reporte">REPORTE</span></td>
              </tr>
              <tr>
                <td>1048</td>
                <td>18/04/2024</td>
                <td>Calle Pumacurco 210</td>
                <td><span class="status-badge status-proceso">EN PROCESO</span></td>
              </tr>
              <tr>
                <td>1034</td>
                <td>15/04/2024</td>
                <td>Jirón Santiago 320</td>
                <td><span class="status-badge status-solucionado">SOLUCIONADO</span></td>
              </tr>
              <tr>
                <td>1027</td>
                <td>13/04/2024</td>
                <td>Calle Mantas 120</td>
                <td><span class="status-badge status-solucionado">SOLUCIONADO</span></td>
              </tr>
              <tr>
                <td>1013</td>
                <td>10/04/2024</td>
                <td>Av. Garcilaso 1204</td>
                <td><span class="status-badge status-proceso">EN PROCESO</span></td>
              </tr>
              <tr>
                <td>1009</td>
                <td>08/04/2024</td>
                <td>Calle Hospital 50</td>
                <td><span class="status-badge status-reporte">REPORTE</span></td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </main>
  </div>

  <!-- ====== SCRIPT ====== -->
  <script>
    document.getElementById("logoutBtn").addEventListener("click", function() {
      if (confirm('¿Estás seguro de que quieres cerrar sesión?')) {
        alert("Sesión cerrada correctamente.");
        window.location.href = "./index.html";
      }
    });

    // Funcionalidad básica para los filtros
    document.getElementById('estado').addEventListener('change', function() {
      const estado = this.value;
      const filas = document.querySelectorAll('tbody tr');
      
      filas.forEach(fila => {
        if (estado === 'todos') {
          fila.style.display = '';
        } else {
          const estadoFila = fila.querySelector('.status-badge').textContent.toLowerCase();
          if (estadoFila.includes(estado)) {
            fila.style.display = '';
          } else {
            fila.style.display = 'none';
          }
        }
      });
    });

    // Funcionalidad para filtros de fecha
    document.getElementById('fecha-inicio').addEventListener('change', aplicarFiltros);
    document.getElementById('fecha-fin').addEventListener('change', aplicarFiltros);

    function aplicarFiltros() {
      const fechaInicio = new Date(document.getElementById('fecha-inicio').value);
      const fechaFin = new Date(document.getElementById('fecha-fin').value);
      const estado = document.getElementById('estado').value;
      const filas = document.querySelectorAll('tbody tr');
      
      filas.forEach(fila => {
        const fechaTexto = fila.cells[1].textContent;
        const fechaFila = convertirFecha(fechaTexto);
        const estadoFila = fila.querySelector('.status-badge').textContent.toLowerCase();
        
        let mostrar = true;
        
        // Filtro por fecha
        if (fechaInicio && fechaFila < fechaInicio) mostrar = false;
        if (fechaFin && fechaFila > fechaFin) mostrar = false;
        
        // Filtro por estado
        if (estado !== 'todos' && !estadoFila.includes(estado)) mostrar = false;
        
        fila.style.display = mostrar ? '' : 'none';
      });
    }

    function convertirFecha(fechaTexto) {
      const [dia, mes, año] = fechaTexto.split('/');
      return new Date(año, mes - 1, dia);
    }
  </script>
  <!-- Al final del body, ANTES de cerrar </body> -->
<script src="../js/main.js"></script>
</body>
</html>